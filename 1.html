<!doctype html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="viewport" content="width=device-width,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="apple-mobile-web-app-capable" content="yes">
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://172.16.132.63/themes/scale/72.png" />
        <title>图片缩放</title>
        <style type="text/css">
        *{ margin:0; padding:0; }
        div{
        	width:200px;
        	height:200px;
        	position:absolute;
        	left:100px;
        	top:100px;
        	/*overflow:hidden;*/
        	z-index:2;
        	background:rgba(255,0,0,.6);
        }
        img{
        	position:absolute;
        	left:100px;
        	top:100px;
        	z-index:1;
        }
        </style>
</head>
<body>
	<div></div>
	<img src="themes/scale/1.jpg" alt="" />

<script type="text/javascript">

document.addEventListener("DOMContentLoaded", function(e){

	var img = document.querySelector("img"),
		div = document.querySelector("div");



	div.addEventListener("touchstart", touchstart, false);

	function touchstart(e){
		e.preventDefault();

		// alert();
		// var x = getPage(e, "pageX");

		var raido = 740/640;

		var distX = getPage(e, "pageX") - div.offsetLeft,
			distY = getPage(e, "pageY") - div.offsetTop,
			newX = Math.round(distX*raido)-distX,
			newY = Math.round(distY*raido)-distY;

		// var y = 100+(Math.round(raido*400)-400)/2,
		// 	x = 100+(740-640)/2;

		var x = 100-newX,
			y = 100-newY;

		console.log(getPage(e, "pageX") + "||" +distX + "||" + Math.round(distX*raido) + "||" + newX);
		console.log(getPage(e, "pageY") + "||" +distY + "||" + Math.round(distY*raido) + "||" + newY);

		img.style.width = "740px";
		img.style.left = x+"px";
		img.style.top = y+"px";
	}


	function getPage(event, page) {
		return event.changedTouches[0][page];
	}
}, false);
</script>
</body>
</html>
