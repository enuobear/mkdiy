<!DOCTYPE html>
<html>
<head>
<meta http-equiv="content-type"  content="text/html; charset=utf-8" />
<meta http-equiv="Cache-Control" content="no-cache" />
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no" />
<title></title>
    <style>
      .spot{
        display: block;
        background:#1881f0;
        width:18px;
        height:18px;
        border-radius: 9px;
        margin-left:100px;
      }
    </style>
</head>
  <body>
    <span class="spot"></span>
    <canvas id="a_canvas"></canvas>

    <script type="text/javascript">
      (function (){
        window.addEventListener("load", function(){

          var data = [80,92,104,110,68,50,45,90,74,68,98,103];

          // 获取上下文
          var a_canvas = document.getElementById('a_canvas');
			

		var tScale  = window.devicePixelRatio,
			tWidth  = 400,
			tHeight = 300;
		a_canvas.style.width = tWidth + "px";
		a_canvas.style.height = tHeight + "px";
		a_canvas.width = tWidth * tScale;
		a_canvas.height = tHeight * tScale;

          var context = a_canvas.getContext("2d");


          // 绘制背景
          // var gradient = context.createLinearGradient(0,0,0,300);


          // gradient.addColorStop(0,"#e0e0e0");
          // gradient.addColorStop(1,"#ffffff");


          // context.fillStyle = gradient;

          // context.fillRect(0,0,a_canvas.width,a_canvas.height);

         
          // 描绘边框
          var grid_cols = data.length + 1;
          var grid_rows = 10;
          var cell_height = a_canvas.height / grid_rows;
          var cell_width = a_canvas.width / grid_cols;
          context.lineWidth = 1;
          context.strokeStyle = "#cdcdcd";
          console.log("cell_width,cell_height:",cell_width,cell_height);

          // 结束边框描绘
          context.beginPath();
          // 准备画横线
          for (var col = 0; col <= grid_cols; col++) {
            var x = col * cell_width;
            context.moveTo(x,0);
            context.lineTo(x,a_canvas.height);
          }
          // 准备画竖线
          for(var row = 0; row <= grid_rows; row++){
            var y = row * cell_height;
            context.moveTo(0,y);
            context.lineTo(a_canvas.width, y);
          }
          context.lineWidth = 1;
          context.strokeStyle = "#cdcdcd";
          context.stroke();

          var max_v = 0;
          for(var i = 0; i<data.length; i++){
            if (data[i] > max_v) { max_v = data[i]};
          }

          max_v = max_v * 1.1;
          // 将数据换算为坐标
          var points = [];
          for( var i=0; i < data.length; i++){
            var v= data[i];
            var px = cell_width *　(i +1);
            var py = v;
            points.push({"x":px,"y":py});
          }
          // 绘制折现
          context.beginPath();
          context.moveTo(points[0].x, points[0].y);
          for(var i= 1; i< points.length; i++){
            context.lineTo(points[i].x,points[i].y);
            console.log(points[i].x,points[i].y);
          }


          context.lineWidth = 2;
          context.strokeStyle = "#1881f0";
          context.stroke();

          //绘制坐标图形
          for(var i in points){
            var p = points[i];
            context.beginPath();
            context.arc(p.x,p.y,9*tScale,0,2*Math.PI);
            context.fillStyle = "#1881f0";
            context.fill();

            //写文字
            context.textAlign = "center";
            context.textBaseline = "middle";
            context.fillStyle = "#fff";
            context.font=12*tScale+"px Arial";
            context.fillText("12", p.x-1,p.y-1)
          }
          
        },false);
      })();
    </script>
  </body>
